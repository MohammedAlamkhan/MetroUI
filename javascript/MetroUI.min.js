function clearTimeouts(){for(var e=0;e<timeouts.length;e++){clearTimeout(timeouts[e])}timeouts=[]}var touchEventStart="ontouchend"in window?"touchstart":"mousedown";var touchEventEnd="ontouchend"in window?"touchend":"click";var timeouts=[];var availableAccentColors=["lime","green","emerald","teal","cyan","cobalt","indigo","violet","pink","magenta","crimson","red","orange","amber","yellow","brown","olive","steel","mauve","taupe"];var accentColorsStringDE=["Lindgr&uuml;n","Gr&uuml;n","Smaragdgr&uuml;n","Blaugr&uuml;n","Zyan","Kobalt","Indigo","Violett","Rosa","Magenta","Purpur","Rot","Orange","Bernstein","Gelb","Braun","Olivgr&uuml;n","Stahlgrau","Mauve","Taupe"];var currentAccentColor="cyan";$(document).ready(function(){$(".innerCheckbox").addClass("accent");$(".accent:not(.noColor), .accentColor:not(.noColor), .accentBorder:not(.noColor)").addClass(currentAccentColor);$("a:not([name])").addClass("accentColor "+currentAccentColor);$("button").bind(touchEventStart,function(){$(this).addClass("accent "+currentAccentColor)});$("button").bind(touchEventEnd,function(){$(this).removeClass("accent "+currentAccentColor)})});var MetroUI={create:function(e){var e=e||{},t=e.type||undefined,n=e.id||undefined,r=e.active||false,i=e.startSwitched||false,s=e.label||"",o=e.callback||function(){};if(t=="button"){$("#"+n).addClass("metro");if(r==true&&o!=undefined){$("#"+n).bind(touchEventEnd,function(){setTimeout(o,5)})}if(r==false){$("#"+n).attr("disabled","disabled")}}if(t=="switch"){if(!$("#"+n).hasClass("disabled")){$("#"+n).attr("data-id",n);$("body").append('<input class="metro" type="checkbox" data-id="'+n+'">');$("#"+n).bind(touchEventEnd,function(){var e=$("input[type=checkbox][data-id="+$(this).attr("data-id")+"]");$(this).toggleClass("checked");e.attr("checked",!e.attr("checked"))});if(i){$("#"+n).addClass("checked");$("input[type=checkbox][data-id="+n+"]").attr("checked","checked")}else{$("#"+n).removeClass("checked")}}if(s!=""){$("#"+n).addClass("rightLabel");$("div.checkbox#"+n).append("<label>"+s+"</label>")}}if(t=="accentList"){$("#"+n).addClass("metro list").append('<p class="currentAccentColor">$accentColor</p><div class="currentAccent accent '+currentAccentColor+'"></div>').bind(touchEventStart,function(){$(this).addClass("accent "+currentAccentColor)}).bind(touchEventEnd,function(){$(this).removeClass("accent "+currentAccentColor);MetroUI.loadAccentColors()});switch($("html").attr("lang")){case"en":$("p.currentAccentColor").html(currentAccentColor);break;case"de":$("p.currentAccentColor").html(accentColorsStringDE[$.inArray(currentAccentColor,availableAccentColors)]);break;default:$("p.currentAccentColor").html(currentAccentColor);break}}},notify:function(e,t,n){if($("div.notification").length<=0){$("body").append('<div class="notificationWrapper"><div class="notification accent '+currentAccentColor+'"><img class="notifyImage" src="'+n+'" /><span class="sender">'+e+'</span><span class="message">'+t+"</span></div></div>");$("div.notification").bind(touchEventEnd,function(){MetroUI.dismissNotification()});setTimeout(function(){$("div.notification").addClass("slideIn");if(n==undefined){$("img.notifyImage").css("display","none")}},20);timeouts.push(setTimeout(function(){MetroUI.dismissNotification()},5310))}},showAlert:function(e,t,n){if($("div.alert").length<=0){$("body").append('<div class="alertBG"></div><div class="alertWrapper"><div class="alert"><p class="alertTitle">'+e+'</p><p class="alertContent">'+t+'</p><div class="buttons"><button id="dismiss" type="button">'+n+"</button></div></div></div>");setTimeout(function(){$("div.alert").addClass("rotateIn");MetroUI.create({type:"button",id:"dismiss",active:true,callback:function(){MetroUI.dismissAlert()}});$(".alertBG").bind(touchEventStart,function(e){e.preventDefault()});$("button").bind(touchEventStart,function(){$(this).addClass("accent "+currentAccentColor)});$("button").bind(touchEventEnd,function(){$(this).removeClass("accent "+currentAccentColor)})},20)}},showConfirm:function(e){var e=e||{},t=e.title||"",n=e.message||"",r=e.confirmButtonTitle||"",i=e.confirmButtonAction||function(){},s=e.abortButtonTitle||"";if($("div.alert").length<=0){$("body").append('<div class="alertBG"></div><div class="alertWrapper"><div class="alert"><p class="alertTitle">'+t+'</p><p class="alertContent">'+n+'</p><div class="buttons"><button id="confirm">'+r+'</button><button id="abort">'+s+"</button></div></div></div>");setTimeout(function(){$("div.alert").addClass("rotateIn");MetroUI.create({type:"button",id:"confirm",active:true,callback:function(){MetroUI.dismissAlert();timeouts.push(setTimeout(i,150))}});MetroUI.create({type:"button",id:"abort",active:true,callback:function(){MetroUI.dismissAlert()}});$(".alertBG").bind(touchEventStart,function(e){e.preventDefault()});$("button").bind(touchEventStart,function(){$(this).addClass("accent "+currentAccentColor)});$("button").bind(touchEventEnd,function(){$(this).removeClass("accent "+currentAccentColor)})},20)}},changeAccentColors:function(e){$(".accent:not(.noColor), .accentColor:not(.noColor), .accentBorder:not(.noColor)").removeClass(currentAccentColor).addClass(e);$("a").removeClass(currentAccentColor).addClass(e);switch($("html").attr("lang")){case"en":$("p.currentAccentColor").html(e);break;case"de":$("p.currentAccentColor").html(accentColorsStringDE[$.inArray(e,availableAccentColors)]);break;default:$("p.currentAccentColor").html(e);break}currentAccentColor=e},dismissNotification:function(){clearTimeouts();$("div.notification").addClass("slideOut").removeClass("slideIn");setTimeout(function(){$("div.notification").remove()},200)},dismissAlert:function(){clearTimeouts();$("div.alert").removeClass("rotateIn").addClass("rotateOut");setTimeout(function(){$("div.alert, div.alertBG, div.alertWrapper").remove()},150)},loadAccentColors:function(e){var e=e||{},t=e.standalone||true,n=e.className||undefined;if(t){$("body").append('<div class="accentColorPickerUI"><div class="alertBG"></div><div class="tilesWrapper"><div class="closeBox"></div><p class="title-category">Accent color</p><div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 80px; left: 15px;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 80px; left: 90px;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 80px; left: 165px;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 80px; left: 240px;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 155px; left: 15px;-webkit-transition-delay: 30ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 155px; left: 90px;-webkit-transition-delay: 30ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 155px; left: 165px;-webkit-transition-delay: 30ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 155px; left: 240px;-webkit-transition-delay: 30ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 230px; left: 15px; -webkit-transition-delay: 60ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 230px; left: 90px;-webkit-transition-delay: 60ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 230px; left: 165px;-webkit-transition-delay: 60ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 230px; left: 240px;-webkit-transition-delay: 60ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 305px; left: 15px;-webkit-transition-delay: 90ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 305px; left: 90px;-webkit-transition-delay: 90ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 305px; left: 165px; -webkit-transition-delay: 90ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 305px; left: 240px;  -webkit-transition-delay: 90ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 380px; left: 15px; -webkit-transition-delay: 120ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 380px; left: 90px; -webkit-transition-delay: 120ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 380px; left: 165px; -webkit-transition-delay: 120ms;"></div></div><div class="outerTile" style="-webkit-perspective: 1000px"><div class="tile accent noColor" style="top: 380px; left: 240px; -webkit-transition-delay: 120ms;"></div></div></div></div></div>');setTimeout(function(){$(".closeBox").bind(touchEventStart,function(){$(this).css("opacity","0.3")});$(".closeBox").bind(touchEventEnd,function(){$(this).removeAttr("style");MetroUI.closeAccentColors()})},20);for(var r=0;r<20;r++){$(".tilesWrapper .outerTile:nth-child("+(r+1)+") .tile").addClass(availableAccentColors[r]).bind(touchEventEnd,function(){var e=$(this).attr("class");e=e.replace("tile accent noColor ","");setTimeout(function(){MetroUI.closeAccentColors();setTimeout(function(){MetroUI.changeAccentColors(e)},260)},20)})}var i=0;for(var r=1;r<=20;r++){if(r==5||r==9||r==13||r==17){i=i+30}if(i>0){$(".tilesWrapper .outerTile:nth-child("+r+") .tile").css({"transition-delay":i+"ms","-webkit-transition-delay":i+"ms","-moz-transition-delay":i+"ms"})}}setTimeout(function(){$(".tilesWrapper").addClass("rotateIn")},20)}},closeAccentColors:function(e){$(".tilesWrapper").addClass("rotateOut");setTimeout(function(){$(".accentColorPickerUI, "+e).remove()},260)}}